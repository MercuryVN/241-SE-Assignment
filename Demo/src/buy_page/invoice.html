<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hóa đơn thanh toán</title>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="buy_page.css" rel="stylesheet">

    </head>

    <body>

        <header class="text-white p-3">

            <div class="container d-flex justify-content-between align-items-center">

                <div class="d-flex align-items-center">

                    <h1>DỊCH VỤ IN THÔNG MINH DÀNH CHO SINH VIÊN</h1>

                </div>

                <nav>

                    <ul class="nav" id="navBarItem">

                    </ul>

                </nav>

            </div>

        </header>

        <main class="container">
            <div class="container mt-5">

                <!-- Invoice Card -->
                <div class="card shadow">
                    <div class="card-header bg-primary text-white text-center">
                        <h4>HÓA ĐƠN THANH TOÁN</h4>
                    </div>
                    <div class="card-body">
                        <p><strong>Họ và tên:</strong> Nguyễn Văn A</p>
                        <p><strong>Mã số sinh viên:</strong> <span id="studentId">2200000</span></p>
                        <p><strong>Giá tiền:</strong> <span id="pricePerPage">500 đ/trang</span></p>
                        <p><strong>Số trang:</strong> <span id="numPages"></span></p>
                        <p><strong>Thời gian mua:</strong> <span id="purchaseTime"></span></p>
                        <p><strong>Tổng số tiền thanh toán:</strong> <span id="totalCost" class="text-danger fw-bold"></span></p>
                    </div>
                    <div class="card-footer d-flex justify-content-between">
                        <button class="btn btn-success" onclick="acceptPayment()">Chấp nhận</button>
                        <button class="btn btn-danger" onclick="cancelPayment()">Hủy bỏ</button>
                    </div>
                </div>
            </div>
        </main>

        <footer class="text-white text-center p-1">

            <div class="row w-100">

                <div class="col-md-6 d-flex justify-content-center align-items-center">

                    <img src="../asset/bk_logo.png" alt="Company Logo" class="me-2">
                    <h1 class="h4 mb-0">Trường Đại học Bách khoa TP. HCM - ĐHQG TP. HCM</h1>

                </div>

                <div class="col-md-6">

                    <div class="center">

                        <div class="row">

                            <div class="col-md-4 d-flex justify-content-center align-items-center">

                                <a href="#" class="text-white">Hướng dẫn sử dụng</a>

                            </div>

                            <div class="col-md-4 d-flex justify-content-center align-items-center">

                                <a href="#" class="text-white">Góp ý chất lượng/Báo cáo sự cố</a>

                            </div>

                            <div class="col-md-4 d-flex justify-content-center align-items-center">

                                <a href="#" class="text-white">Chính sách bảo mật</a>

                            </div>

                        </div>

                        <div>

                            <p>&copy; 2024 Bản quyền website thuộc Trường Đại học Bách khoa HCM</p>

                        </div>

                    </div>

                </div>

            </div>

        </footer>

        <script>
            // Load data from localStorage
            const pageKey = "page";
            const numPages = localStorage.getItem('numPages');
            const pricePerPage = 500; // Price per page in VNĐ
            const totalCost = numPages * pricePerPage;

            // Fill dynamic data
            document.getElementById('numPages').textContent = numPages || '0';
            document.getElementById('totalCost').textContent = new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            }).format(totalCost);

            // Show current time
            document.getElementById('purchaseTime').textContent = new Date().toLocaleString('vi-VN');

            // Button actions
            function acceptPayment()
            {
                var page = Number.parseInt(sessionStorage.getItem(pageKey));
                page = page + Number.parseInt(numPages);
                sessionStorage.setItem(pageKey, page);
                alert('Thanh toán thành công! Cảm ơn bạn.');
                window.location.href = '../dashboard/student.html';
            }

            function cancelPayment()
            {
                alert('Bạn đã hủy giao dịch.');
                window.location.href = 'index.html';
            }
        </script>
    </body>

</html>